"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __read = (this && this.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Index = void 0;
var pondlive_1 = require("@eleven-am/pondlive");
var TodoHome_1 = require("./TodoHome");
var ReminderHome_1 = require("./ReminderHome");
var database_1 = require("../controller/database");
var Index = function (ctx) {
    var _a = __read((0, pondlive_1.useServerInfo)(ctx, database_1.homeContext), 1), name = _a[0];
    var _b = __read((0, pondlive_1.useServerInfo)(ctx, database_1.searchContext), 2), search = _b[0], setSearch = _b[1];
    var _c = __read((0, pondlive_1.useServerInfo)(ctx, database_1.todosContext), 1), todos = _c[0];
    var _d = __read((0, pondlive_1.useServerInfo)(ctx, database_1.remindersContext), 1), reminders = _d[0];
    var _e = __read((0, pondlive_1.useServerInfo)(ctx, database_1.notificationContext), 1), notifications = _e[0];
    var routes = (0, pondlive_1.useRouter)([{
            path: '/todo',
            component: TodoHome_1.TodoHome
        }, {
            path: '/reminder',
            component: ReminderHome_1.ReminderHome
        }]);
    var _f = __read((0, pondlive_1.useAction)(ctx, undefined, {
        setSearchQuery: function (event) { return setSearch(event, {
            query: event.data.value || '',
        }); }
    }), 2), _ = _f[0], action = _f[1];
    ctx.onMount(function (req) {
        database_1.manager.monitor(req);
    });
    ctx.onUnmount(function (event) {
        database_1.manager.clear(event);
    });
    return (0, pondlive_1.html)(templateObject_8 || (templateObject_8 = __makeTemplateObject(["\n        <div class=\"container mx-auto\">\n            <div class=\"flex relative justify-between items-center py-4\">\n                <div class=\"flex items-center\">\n                    <a class=\"text-2xl font-bold text-cyan-900 mr-2\" href=\"/\">PondLive Todos</a>\n\n                    <div class=\"flex items-center ml-6 sm:w-68 md:w-96\">\n                        <div class=\"flex items-center relative w-full\">\n                            <input type=\"text\"\n                                   pond-value=\"", "\"\n                                   class=\"h-10 px-5 w-full pr-10 text-sm bg-white border-2 border-cyan-600 rounded-lg focus:outline-none focus:border-cyan-900\"\n                                   pond-keyup=\"", "\" placeholder=\"Search\">\n                            <button type=\"submit\" class=\"absolute focus:outline-none mt-1.5 right-3\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">search</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"flex items-center ml-6 right-0\">\n                    <ul class=\"flex items-center\">\n                        <li class=\"mr-3 relative\">\n                            <a class=\"flex items-center focus:outline-none cursor-pointer\">\n                                <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">notifications</span>\n                                <span class=\"absolute top-0 right-0 w-4 h-4 bg-red-500 rounded-full text-xs text-white text-center\"\n                                      style=\"display: ", "\">\n                                    ", "\n                                </span>\n                            </a>\n                        </li>\n                        <li class=\"mr-3\">\n                            ", "\n                        </li>\n                        <li class=\"mr-3\">\n                            ", "\n                        </li>\n                    </ul>\n                </div>\n            </div>\n\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div class=\"bg-white rounded-lg shadow-lg p-4\">\n                    <a class=\"flex items-center justify-between\" href=\"/reminder\">\n                        <h1 class=\"text-xl font-bold text-cyan-900\">Reminders</h1>\n                        <div class=\"flex items-center focus:outline-none cursor-pointer\">\n                            <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">event</span>\n                        </div>\n                    </a>\n                    ", "\n                </div>\n\n                <div class=\"bg-white rounded-lg shadow-lg p-4\">\n                    <a class=\"flex items-center justify-between\" href=\"/todo\">\n                        <h1 class=\"text-xl font-bold text-cyan-900\">Todos</h1>\n                        <div class=\"flex items-center focus:outline-none cursor-pointer\">\n                            <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">calendar_view_day</span>\n                        </div>\n                    </a>\n                    ", "\n                </div>\n\n                <div class=\"bg-white rounded-lg shadow-lg p-4\">\n                    <a class=\"flex items-center justify-between\" href=\"/reminder\">\n                        <h1 class=\"text-xl font-bold text-cyan-900\">Notifications</h1>\n                        <div class=\"flex items-center focus:outline-none cursor-pointer\">\n                            <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">notifications</span>\n                        </div>\n                    </a>\n                    ", "\n                </div>\n            </div>\n\n            ", "\n        </div>\n    "], ["\n        <div class=\"container mx-auto\">\n            <div class=\"flex relative justify-between items-center py-4\">\n                <div class=\"flex items-center\">\n                    <a class=\"text-2xl font-bold text-cyan-900 mr-2\" href=\"/\">PondLive Todos</a>\n\n                    <div class=\"flex items-center ml-6 sm:w-68 md:w-96\">\n                        <div class=\"flex items-center relative w-full\">\n                            <input type=\"text\"\n                                   pond-value=\"", "\"\n                                   class=\"h-10 px-5 w-full pr-10 text-sm bg-white border-2 border-cyan-600 rounded-lg focus:outline-none focus:border-cyan-900\"\n                                   pond-keyup=\"", "\" placeholder=\"Search\">\n                            <button type=\"submit\" class=\"absolute focus:outline-none mt-1.5 right-3\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">search</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"flex items-center ml-6 right-0\">\n                    <ul class=\"flex items-center\">\n                        <li class=\"mr-3 relative\">\n                            <a class=\"flex items-center focus:outline-none cursor-pointer\">\n                                <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">notifications</span>\n                                <span class=\"absolute top-0 right-0 w-4 h-4 bg-red-500 rounded-full text-xs text-white text-center\"\n                                      style=\"display: ", "\">\n                                    ", "\n                                </span>\n                            </a>\n                        </li>\n                        <li class=\"mr-3\">\n                            ", "\n                        </li>\n                        <li class=\"mr-3\">\n                            ", "\n                        </li>\n                    </ul>\n                </div>\n            </div>\n\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div class=\"bg-white rounded-lg shadow-lg p-4\">\n                    <a class=\"flex items-center justify-between\" href=\"/reminder\">\n                        <h1 class=\"text-xl font-bold text-cyan-900\">Reminders</h1>\n                        <div class=\"flex items-center focus:outline-none cursor-pointer\">\n                            <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">event</span>\n                        </div>\n                    </a>\n                    ", "\n                </div>\n\n                <div class=\"bg-white rounded-lg shadow-lg p-4\">\n                    <a class=\"flex items-center justify-between\" href=\"/todo\">\n                        <h1 class=\"text-xl font-bold text-cyan-900\">Todos</h1>\n                        <div class=\"flex items-center focus:outline-none cursor-pointer\">\n                            <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">calendar_view_day</span>\n                        </div>\n                    </a>\n                    ", "\n                </div>\n\n                <div class=\"bg-white rounded-lg shadow-lg p-4\">\n                    <a class=\"flex items-center justify-between\" href=\"/reminder\">\n                        <h1 class=\"text-xl font-bold text-cyan-900\">Notifications</h1>\n                        <div class=\"flex items-center focus:outline-none cursor-pointer\">\n                            <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">notifications</span>\n                        </div>\n                    </a>\n                    ", "\n                </div>\n            </div>\n\n            ", "\n        </div>\n    "])), search, action('setSearchQuery'), notifications.data.length > 0 ? 'block' : 'none', notifications.data.length, name.active === true ? (0, pondlive_1.html)(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n                                <a class=\"flex overflow-clip items-center justify-center ml-6 w-36 h-10 rounded-lg bg-cyan-900 text-white focus:outline-none hover:bg-cyan-700 drop-shadow-lg hover:drop-shadow-xl\"\n                                   href=\"/reminder/addReminder\">\n                                    <span class=\"material-symbols-outlined\">add</span>\n                                    Add Reminder\n                                </a>"], ["\n                                <a class=\"flex overflow-clip items-center justify-center ml-6 w-36 h-10 rounded-lg bg-cyan-900 text-white focus:outline-none hover:bg-cyan-700 drop-shadow-lg hover:drop-shadow-xl\"\n                                   href=\"/reminder/addReminder\">\n                                    <span class=\"material-symbols-outlined\">add</span>\n                                    Add Reminder\n                                </a>"]))) : (0, pondlive_1.html)(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n                                <a class=\"flex items-center focus:outline-none cursor-pointer\" href=\"/reminder\">\n                                    <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">event</span>\n                                </a>\n                            "], ["\n                                <a class=\"flex items-center focus:outline-none cursor-pointer\" href=\"/reminder\">\n                                    <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">event</span>\n                                </a>\n                            "]))), name.active === false ? (0, pondlive_1.html)(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n                                <a class=\"flex overflow-clip items-center justify-center ml-6 w-36 h-10 rounded-lg bg-cyan-900 text-white focus:outline-none hover:bg-cyan-700 drop-shadow-lg hover:drop-shadow-xl\"\n                                   href=\"/todo/addTodo\">\n                                    <span class=\"material-symbols-outlined\">add</span>\n                                    Add Todo\n                                </a>"], ["\n                                <a class=\"flex overflow-clip items-center justify-center ml-6 w-36 h-10 rounded-lg bg-cyan-900 text-white focus:outline-none hover:bg-cyan-700 drop-shadow-lg hover:drop-shadow-xl\"\n                                   href=\"/todo/addTodo\">\n                                    <span class=\"material-symbols-outlined\">add</span>\n                                    Add Todo\n                                </a>"]))) : (0, pondlive_1.html)(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n                                <a class=\"flex items-center focus:outline-none cursor-pointer\" href=\"/todo\">\n                                    <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">calendar_view_day</span>\n                                </a>\n                            "], ["\n                                <a class=\"flex items-center focus:outline-none cursor-pointer\" href=\"/todo\">\n                                    <span class=\"material-symbols-outlined text-cyan-700 hover:text-cyan-900\">calendar_view_day</span>\n                                </a>\n                            "]))), reminders.filter(function (d) { return !d.completed; }).map(function (reminder) { return (0, pondlive_1.html)(templateObject_5 || (templateObject_5 = __makeTemplateObject(["\n                        <div class=\"flex items-center justify-between mt-4\">\n                            <div class=\"flex items-center\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">event</span>\n                                <span class=\"ml-2 text-sm text-cyan-900\">", "</span>\n                            </div>\n                        </div>\n                    "], ["\n                        <div class=\"flex items-center justify-between mt-4\">\n                            <div class=\"flex items-center\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">event</span>\n                                <span class=\"ml-2 text-sm text-cyan-900\">", "</span>\n                            </div>\n                        </div>\n                    "])), reminder.text); }), todos.filter(function (d) { return !d.completed; }).map(function (todo) { return (0, pondlive_1.html)(templateObject_6 || (templateObject_6 = __makeTemplateObject(["\n                        <div class=\"flex items-center justify-between mt-4\">\n                            <div class=\"flex items-center\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">calendar_view_day</span>\n                                <span class=\"ml-2 text-sm text-cyan-900\">", "</span>\n                            </div>\n                        </div>\n                    "], ["\n                        <div class=\"flex items-center justify-between mt-4\">\n                            <div class=\"flex items-center\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">calendar_view_day</span>\n                                <span class=\"ml-2 text-sm text-cyan-900\">", "</span>\n                            </div>\n                        </div>\n                    "])), todo.text); }), notifications.data.map(function (notification) { return (0, pondlive_1.html)(templateObject_7 || (templateObject_7 = __makeTemplateObject(["\n                        <div class=\"flex items-center justify-between mt-4\">\n                            <div class=\"flex items-center\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">notifications</span>\n                                <span class=\"ml-2 text-sm text-cyan-900\">", "</span>\n                            </div>\n                        </div>\n                    "], ["\n                        <div class=\"flex items-center justify-between mt-4\">\n                            <div class=\"flex items-center\">\n                                <span class=\"material-symbols-outlined text-cyan-700\">notifications</span>\n                                <span class=\"ml-2 text-sm text-cyan-900\">", "</span>\n                            </div>\n                        </div>\n                    "])), notification.text); }), routes(ctx));
};
exports.Index = Index;
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;
